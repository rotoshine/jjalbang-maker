<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width">
	<title>짤방생성기</title>
	<link rel="stylesheet" type="text/css" href="/lib/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="/css/style.css">
    <base href="/" />
</head>
<body ng-app="JBMaker">
    <nav class="navbar navbar-default" ng-controller="NavController">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">짤방생성기</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li ng-repeat="source in sources" ng-class="{active: isActive('/source/' + source.id)}">
                        <a ng-href="/source/{{source.id}}">{{source.name}}</a>
                    </li>
                    <li ng-class="{active: isActive('/source-extract')}">
                        <a ng-href="/source-extract">소스 생성</a>
                    </li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>
	<div class="container">
        <div ui-view=""></div>
	</div>
    <script type="text/ng-template" id="source-extract.html">
        <div ng-init="init()">
            <div class="row">
                <label for="local-image-file">파일 선택</label>
                <input id="local-image-file" type="file" accept="image/*"/>
                <div class="edit-layer">
                    <canvas id="loaded-image"></canvas>
                    <div ng-repeat="cut in source.cuts" class="cut-edit" ng-style="getStyle(cut)" ng-click="removeCut($index)"></div>
                </div>
            </div>
            <div class="row">
                <h3>추출된 데이터</h3>
                <pre>
{{source | json}}
                </pre>
            </div>
        </div>
    </script>
    <script type="text/ng-template" id="source.html">
        <div ng-init="init()">
            <div class="row">
                <ul>
                    <li>생성을 눌러도 이미지 저장이 안 뜨는 경우 아래 생성된 이미지를 우클릭 - 저장하십시오.</li>
                    <li>줄바꿈은 엔터로 해야 생성되는 이미지에서도 제대로 됩니다.</li>
                    <li>구글 크롬에 최적화 되어 있습니다.</li>
                    <li>문의는 <a href="https://twitter.com/winterwolf0412" target="_blank">https://twitter.com/winterwolf0412</a></li>
                </ul>
            </div>
            <div class="row">
                <span>
                    <label for="font-size">글자크기</label>
                    <select id="font-size" ng-model="selectedFontSize"
                            ng-options="fontSize as fontSize for fontSize in fontSizes"
                            ng-change="applyFontSize(selectedFontSize)"></select>
                </span>
                <span>
                    <label for="font">글꼴</label>
                    <select id="font" ng-model="selectedFont"
                            ng-options="font.cssValue as font.name for font in fonts"
                            ng-change="applyFont(selectedFont)"></select>
                </span>
                <span class="buttons">
                    <a id="generate-image" class="btn btn-primary" href="#" ng-click="generate($event)">생성</a>
                </span>
            </div>
            <div class="row">
                <div class="edit-layer" ng-style="{'width': source.width + 'px', 'height': source.height + 'px'}">
                    <canvas id="background" width="{{source.width}}" height="{{source.height}}"></canvas>
                    <textarea class="cut" ng-repeat="cut in source.cuts" placeholder="대사를 입력하세요."
                              ng-style="getStyle(cut)"
                              ng-model="cut.text"
                              ng-trim="false"></textarea>
                </div>
            </div>
            <div class="row">
                <canvas id="result" width="{{source.width}}" height="{{source.height}}"></canvas>
            </div>
        </div>
    </script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-49604777-4', 'auto');
        ga('send', 'pageview');

    </script>
    <!-- TODO browseify로 뺼 것 -->
    <script src="//ajax.googleapis.com/ajax/libs/webfont/1.4.10/webfont.js"></script>
    <script src="/js/bundle.js"></script>
</body>
</html>